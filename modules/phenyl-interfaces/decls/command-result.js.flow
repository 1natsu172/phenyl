// @flow

import type {
  Restorable,
  UpdateOperation,
} from 'mongolike-operations'
import type { Id } from './id.js.flow'
import type { Session } from './session.js.flow'
import type { Entity } from './entity.js.flow'
import type { ErrorResult } from './error-result.js.flow'

export type CommandResult = {
  ok: 1,
  n: number,
  versionId?: ?Id,
  versionsById?: { [entityId: Id]: Id },
}

export type MultiValuesCommandResult = {
  ok: 1,
  n: number,
  values: Array<Entity>,
  versionsById: { [entityId: Id]: Id },
}

export type GetCommandResult = {|
  ok: 1,
  n: number, // TODO necessary?
  value: Entity,
  versionId: ?Id,
|}

export type PushCommandResult = {|
  ok: 1,
  n: number, // TODO necessary?
  operations: Array<UpdateOperation>,
  versionId: ?Id,
|} | GetCommandResult

export type CustomCommandResult = {
  ok: 1,
  result?: Object
}

export type LoginCommandResult = {
  ok: 1,
  session: Session,
  user: ?Entity,
}

export type LogoutCommandResult = {
  ok: 1,
}
