// @flow

import type { Restorable } from './restorable.js.flow'
import type { Session } from './session.js.flow'
import type { RestorableEntity } from './restorable.js.flow'

export type CommandResult = OKCommandResult | NGCommandResult
export type FetchCommandResult = OKFetchCommandResult | NGCommandResult
export type GetCommandResult = OKGetCommandResult | NGCommandResult
export type CustomCommandResult = OKCustomCommandResult | NGCommandResult
export type LoginCommandResult = OKLoginCommandResult | NGCommandResult
export type LogoutCommandResult = OKLogoutCommandResult | NGCommandResult

type ErrorInterface = { message: string }

export type OKCommandResult = {
  ok: true | 1,
  n: number,
}

export type NGCommandResult = {
  ok: false | 0,
  error: ErrorInterface,
}

export type OKFetchCommandResult = {
  ok: true | 1,
  n: number,
  values: Array<Restorable>
}

export type OKGetCommandResult = {
  ok: true | 1,
  n: number,
  value: Restorable
}

export type OKCustomCommandResult = {
  ok: true | 1,
  result?: Object
}

export type OKLoginCommandResult = {
  ok: true | 1,
  session: Session,
  user: RestorableEntity,
}

export type OKLogoutCommandResult = {
  ok: true | 1,
}
